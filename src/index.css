@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    /* Rational Grid Design System - Global Rules */
    
    /* Zero border-radius for ALL elements - overrides all rounded corners */
    * {
        border-radius: 0 !important;
    }
    
    /* Allow explicit rounded-full for pills/circles when needed */
    .rounded-full,
    [class*="rounded-full"] {
        border-radius: 9999px !important;
    }

    :root {
        /* Rational Grid Design Tokens */
        --action-blue: #0066FF;
        --neutral-50: #FAFAFA;
        --neutral-200: #E5E7EB;
        --neutral-300: #D1D5DB;
        --neutral-900: #171717;
        --neutral-950: #0A0A0A;
        
        /* Legacy glassmorphism variables (for backward compatibility) */
        --glass-bg: rgba(255, 255, 255, 0.05);
        --glass-border: rgba(255, 255, 255, 0.1);
        --glass-blur: 12px;
        --neon-blue: #0066FF;
        --neon-purple: #bd00ff;
        --bg-dark: #0f111a;
        --bg-card: #1a1d2d;
    }

    body {
        @apply bg-white text-neutral-900 antialiased font-sans;
    }
    
    /* Dark mode support with Rational Grid colors */
    body.dark {
        @apply bg-neutral-950 text-neutral-50;
    }
}

@layer components {
    /* Rational Grid Component Base Classes */
    
    /* Card - 8px spacing system, zero border-radius */
    .rg-card {
        @apply p-8 bg-white border border-neutral-200;
    }
    
    .rg-card-dark {
        @apply bg-neutral-950 border-neutral-800;
    }
    
    /* Button Hierarchy System */
    .rg-btn {
        @apply px-6 py-2 font-sans font-medium text-sm transition-colors border;
        @apply rounded-none; /* Explicit zero radius */
    }
    
    .rg-btn-primary {
        @apply bg-primary text-white border-primary hover:bg-primary-600;
    }
    
    .rg-btn-secondary {
        @apply bg-white text-neutral-900 border-neutral-200 hover:bg-neutral-50;
    }
    
    .rg-btn-ghost {
        @apply bg-transparent text-neutral-900 border-neutral-200 hover:bg-neutral-50;
    }
    
    /* Input - 1px borders, JetBrains Mono labels */
    .rg-input-wrapper {
        @apply flex flex-col gap-1;
    }
    
    .rg-input-label {
        @apply font-mono text-xs text-neutral-600 uppercase tracking-wider;
    }
    
    .rg-input {
        @apply px-3 py-2 bg-white border border-neutral-200 text-neutral-900;
        @apply focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary;
    }
    
    /* Modal/Dialog - Zero border-radius */
    .rg-modal {
        @apply bg-white border border-neutral-200 shadow-xl;
    }
    
    .rg-modal-dark {
        @apply bg-neutral-950 border-neutral-800;
    }
    
    /* Typography utilities */
    .rg-text-body {
        @apply font-sans text-base leading-relaxed;
    }
    
    .rg-text-meta {
        @apply font-mono text-xs text-neutral-600;
    }
    
    /* Spacing utilities (8px grid) */
    .rg-space-1 { @apply p-1; } /* 4px */
    .rg-space-2 { @apply p-2; } /* 8px */
    .rg-space-3 { @apply p-3; } /* 12px */
    .rg-space-4 { @apply p-4; } /* 16px */
    .rg-space-6 { @apply p-6; } /* 24px */
    .rg-space-8 { @apply p-8; } /* 32px */
    
    /* Legacy glass components (for backward compatibility) */
    .glass-panel {
        @apply bg-[length:var(--glass-bg)] backdrop-blur-[length:var(--glass-blur)] border border-[color:var(--glass-border)];
    }

    .glass-card {
        @apply glass-panel p-4 transition-all duration-300 hover:bg-white/10;
    }

    .glass-btn {
        @apply px-4 py-2 bg-[color:var(--neon-blue)] text-black font-semibold hover:shadow-[0_0_15px_var(--neon-blue)] transition-all duration-200;
    }

    .glass-input {
        @apply bg-black/20 border border-white/10 px-4 py-2 text-white focus:outline-none focus:border-[color:var(--neon-blue)] transition-colors;
    }
}

/* Accessibility: High Contrast Mode Support */
body.high-contrast {
    background-color: #FFFFFF !important;
    color: #000000 !important;
}

body.high-contrast * {
    border-color: #000000 !important;
}

body.high-contrast .rg-btn-primary {
    background-color: #0000FF !important; /* Pure blue */
    border-color: #0000FF !important;
    color: #FFFFFF !important;
}

body.high-contrast .rg-btn-secondary,
body.high-contrast .rg-btn-ghost {
    background-color: #FFFFFF !important;
    color: #000000 !important;
    border-color: #000000 !important;
}

body.high-contrast .text-neutral-900,
body.high-contrast .text-neutral-700,
body.high-contrast .text-neutral-600 {
    color: #000000 !important;
}

body.high-contrast .bg-neutral-50,
body.high-contrast .bg-white {
    background-color: #FFFFFF !important;
}

body.high-contrast .border-neutral-200,
body.high-contrast .border-neutral-300 {
    border-color: #000000 !important;
}

/* Accessibility: Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* User preference override for reduced motion */
body.reduced-motion *,
body.reduced-motion *::before,
body.reduced-motion *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
}

/* Preserve functional transitions (not decorative) */
body.reduced-motion .modal-backdrop,
body.reduced-motion .dialog-overlay,
body.reduced-motion .tooltip,
body.reduced-motion .dropdown-menu {
    transition: opacity 0.2s ease-out !important;
}

/* Focus ring visibility for keyboard navigation */
*:focus-visible {
    outline: 2px solid #0066FF;
    outline-offset: 4px;
}

body.high-contrast *:focus-visible {
    outline: 2px solid #0000FF;
    outline-offset: 4px;
}

/* Screen reader only utility */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

/* Skip link for keyboard navigation */
.skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: #0066FF;
    color: white;
    padding: 8px;
    text-decoration: none;
    z-index: 100;
}

.skip-link:focus {
    top: 0;
}